<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>原生JS实现页面滚动方向检测</title>
  <script src="http://g.tbcdn.cn/tb/kimi/0.0.233/kimi.js"></script>

</head>
<body style="height: 6000px;">
<div class="nav" style="position:fixed; top:0;left:0;width: 100%;height: 60px;background-color: pink;"></div>
<div class="result"></div>

<script>

  var $nav = $('.nav');
  var $result = $('.result');

  window.onscroll = function(e){
    $result.html('swipeDown');

    scrollFunc();

    if(scrollDirection == 'down'){
      $nav.css({
        position: 'absolute'
      });
    }
    else if(scrollDirection == 'up'){
      $nav.css({
        position: 'fixed'
      });
    }
  }

  var scrollAction = {x: 'undefined', y: 'undefined'}, scrollDirection;

  function scrollFunc() {
    if (typeof scrollAction.x == 'undefined') {
      scrollAction.x = window.pageXOffset;
      scrollAction.y = window.pageYOffset;
    }
    var diffX = scrollAction.x - window.pageXOffset;
    var diffY = scrollAction.y - window.pageYOffset;

    if (diffX < 0) {
    // Scroll right
      scrollDirection = 'right';
    } else if (diffX > 0) {
    // Scroll left
      scrollDirection = 'left';

    } else if (diffY < 0) {
    // Scroll down
      scrollDirection = 'down';

    } else if (diffY > 0) {
    // Scroll up
      scrollDirection = 'up';

    } else {
    // First scroll event
    }
    scrollAction.x = window.pageXOffset;
    scrollAction.y = window.pageYOffset;
  }
</script>


</body>
</html>
